(()=>{"use strict";class e{constructor(e){this.name=e,this.todos=[],this.id}addToDo(e){this.todos.push(e)}removeToDo(e){const t=this.todos.findIndex((t=>t.id===e));this.todos.splice(t,1),console.log(this.todos)}setId(e){this.id=e}findToDoByID(e){const t=this.todos.findIndex((t=>t.id===e));return this.todos[t]}}class t{constructor(e,t,o,n){this.title=e,this.description=t,this.date=o,this.priority=n,this.isFinished=!1,this.id,this.parentId}markAsFinished(){this.isFinished=!1===this.isFinished}setId(e){this.id=e}setParentId(e){this.parentId=e}}new class{constructor(){}};const o=new class{constructor(){}renderToDo=e=>{const t=document.querySelector("ul"),o=document.createElement("li"),n=document.createElement("div"),i=document.createElement("div"),d=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div");l.classList.add("title-element"),n.classList.add("todo"),l.textContent=e.title,n.classList.add(`${e.priority}`),r.textContent="delete",r.classList.add("delete"),s.classList.add("finish"),s.textContent="mark",c.classList.add("show-full"),c.textContent="+",d.classList.add("btns-container"),d.appendChild(c),d.appendChild(s),d.appendChild(r),n.appendChild(l),n.appendChild(d),o.appendChild(n),i.classList.add("todo-full"),i.classList.add("hidden"),i.insertAdjacentHTML("afterbegin",`\n    \n    <p>\n      Description: ${e.description}\n    </p>\n    <p>Date: ${e.date}</p>`),o.appendChild(i),o.setAttribute("data-id",`${e.id}`),t.appendChild(o)};renderForm(){if(document.querySelector(".new-form-container"))return;const e=document.querySelector(".container"),t=document.createElement("div");t.classList.add("new-form-container");const o=document.createElement("form");o.setAttribute("action","submit"),o.insertAdjacentHTML("afterbegin",'<div class="field">\n<label for="title">Title: </label>\n<input type="text" name="title" id="title" required/>\n</div>\n<div class="field">\n<label for="description">Description: </label>\n<input type="text" name="description" id="description" required/>\n</div>\n<div class="field">\n<label for="date">Date: </label>\n<input type="date" name="date" id="date" required/>\n</div>\n<div class="radio-btn">\n<label for="low-prio">Low</label>\n<input type="radio" name="priority" id="low-prio" value="low" />\n<label for="med-prio">Medium</label>\n<input type="radio" name="priority" id="med-prio" value="med" />\n<label for="high-prio">High</label>\n<input type="radio" name="priority" id="high-prio" value="high" checked/>\n</div>\n<button type="submit">Submit</button>\n<div class="close-form"><div class="x">X</div></div>\n'),t.appendChild(o),e.insertAdjacentElement("afterbegin",t),document.querySelector(".close-form").addEventListener("click",(function(){t.remove()}))}renderProjectPreview(e){const t=document.createElement("div");t.classList.add("project");const o=document.createElement("div");o.classList.add("project-preview"),console.log(e.name,e),o.textContent=`${e.name}`,t.setAttribute("data-id",`${e.id}`),t.appendChild(o),document.querySelector(".project-container").appendChild(t)}renderToDoPreview(e){console.log("render start");const t=document.createElement("div");t.classList.add("todo-preview"),t.textContent=`${e.title}`,document.querySelector(`.project[data-id='${e.parentId}']`).insertAdjacentElement("beforeend",t)}renderAllToDo(e){this.clearToDoList(),e.forEach((e=>this.renderToDo(e)))}clearToDoList(){document.querySelector(".todos-list ul").innerHTML=""}todoShow(e){console.log(e),e.classList.toggle("hidden")}renderAllProjectPreview(e){e.projects.forEach((e=>this.renderProjectPreview(e)))}rednerAllToDoPreview(e){console.log(e.projects),e.projects.forEach((e=>e.todos.forEach((e=>this.renderToDoPreview(e)))))}clearToDoPreview(){document.querySelectorAll(".todo-preview").forEach((e=>e.remove()))}toggleFinishedMark(e){e.querySelector(".title-element").classList.toggle("finished"),e.querySelector(".todo-full").classList.toggle("finished")}};console.log("START");const n=new class{constructor(){this.projects=[],this.activeProject,console.log(this.projects)}addProject(e){return this.projects.push(e),this.projects}removeProject(e){}},i=new e("Project Default"),d=new t("1","odin","today","low");d.parentId=1,d.setId(1);const r=new t("2","dva","today","low");r.parentId=1,r.setId(2),i.addToDo(d),i.addToDo(r),i.setId(1);const s=new e("Project 2"),c=new t("3","tri","today","high");c.parentId=2,s.addToDo(c),s.setId(2),n.addProject(i),n.addProject(s),n.activeProject=i;let l=n.activeProject;console.log(n),o.renderAllProjectPreview(n),o.rednerAllToDoPreview(n),o.renderAllToDo(l.todos);const a=document.querySelector(".new-todo-btn"),u=document.querySelector(".project-form"),p=document.querySelector("aside");a.addEventListener("click",(function(){o.renderForm(),document.querySelector("form").addEventListener("submit",m)}));const m=function(e){e.preventDefault();const{title:n,description:i,date:d,priority:r}=Object.fromEntries(new FormData(this)),s=new t(n,i,d,r);s.setId(l.todos.length+1),s.setParentId(l.id),l.addToDo(s),o.renderToDo(...l.todos.slice(-1)),console.log(l.todos.slice(-1)),o.renderToDoPreview(s)};document.querySelector("ul").addEventListener("click",(e=>{const t=e.target.closest(".delete");if(!t)return;const i=t.closest("li");l.removeToDo(+i.dataset.id),i.remove(),o.clearToDoPreview(),o.rednerAllToDoPreview(n)})),u.addEventListener("submit",(function(t){t.preventDefault();const i=this.querySelector("input").value;console.log(i),console.log("clickclack");const d=new e(i);d.setId(n.projects.length+1),n.addProject(d),this.querySelector("input").value="",console.log(n.projects),console.log(n),o.renderProjectPreview(d)})),p.addEventListener("click",(function(e){const t=e.target.closest(".project-preview");t&&t.textContent!==l.name&&(console.log("project selected"),console.log(t),l=n.projects.find((e=>e.name===t.textContent)),console.log(l),o.renderAllToDo(l.todos),console.log(l.todos),console.log(n))})),document.querySelector("ul").addEventListener("click",(function(e){const t=e.target.closest(".show-full");t&&(console.log(t),t.textContent="+"===t.textContent?"-":"+",o.todoShow(t.closest(".todo").nextSibling))})),document.querySelector("ul").addEventListener("click",(function(e){const t=e.target.closest(".finish");if(!t)return;const n=t.closest("li");console.log(n.dataset.id),console.log(l.findToDoByID(+n.dataset.id)),l.findToDoByID(+n.dataset.id).markAsFinished(),o.toggleFinishedMark(n)}));const h=JSON.stringify(n),v=JSON.parse(h);console.log(JSON.parse(h)),console.log(h),v.projects.forEach((t=>Object.assign(t,new e))),console.log(v)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRQyxJQUFJNkYsSSIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9Qcm9qZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9Ub0RvLmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9IYW5kbGVyLmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9ET00uanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLy4vc3JjL01hcmtkb3duLmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8vLi9zcmMvRGF0YS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9qZWN0IHtcbiAgY29uc3RydWN0b3IobmFtZSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy50b2RvcyA9IFtdO1xuICAgIHRoaXMuaWQ7XG4gIH1cblxuICBhZGRUb0RvKHRvZG8pIHtcbiAgICAvLyB0b2RvLnNldElkKHRoaXMudG9kb3MubGVuZ3RoICsgMSk7XG4gICAgdGhpcy50b2Rvcy5wdXNoKHRvZG8pO1xuICB9XG4gIHJlbW92ZVRvRG8oaWQpIHtcbiAgICBjb25zdCB0b2RvID0gdGhpcy50b2Rvcy5maW5kSW5kZXgoKGVsZW1lbnQpID0+IGVsZW1lbnQuaWQgPT09IGlkKTtcbiAgICB0aGlzLnRvZG9zLnNwbGljZSh0b2RvLCAxKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLnRvZG9zKTtcbiAgfVxuICBzZXRJZChpZCkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgfVxuICBmaW5kVG9Eb0J5SUQoaWQpIHtcbiAgICBjb25zdCB0b2RvSWQgPSB0aGlzLnRvZG9zLmZpbmRJbmRleCgoZWxlbWVudCkgPT4gZWxlbWVudC5pZCA9PT0gaWQpO1xuICAgIHJldHVybiB0aGlzLnRvZG9zW3RvZG9JZF07XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvRG8ge1xuICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5KSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLmRhdGUgPSBkYXRlO1xuICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICB0aGlzLmlzRmluaXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmlkO1xuICAgIHRoaXMucGFyZW50SWQ7XG4gIH1cblxuICBtYXJrQXNGaW5pc2hlZCgpIHtcbiAgICB0aGlzLmlzRmluaXNoZWQgPSB0aGlzLmlzRmluaXNoZWQgPT09IGZhbHNlID8gdHJ1ZSA6IGZhbHNlO1xuICB9XG5cbiAgc2V0SWQoaWQpIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gIH1cbiAgc2V0UGFyZW50SWQocGFyZW50SWQpIHtcbiAgICB0aGlzLnBhcmVudElkID0gcGFyZW50SWQ7XG4gIH1cbn1cbiIsImNsYXNzIEhhbmRsZXIge1xuICBjb25zdHJ1Y3RvcigpIHt9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBIYW5kbGVyKCk7XG4iLCJpbXBvcnQgSGFuZGxlciBmcm9tICcuL0hhbmRsZXInO1xuaW1wb3J0IHsgZm9ybU1hcmtkb3duIH0gZnJvbSAnLi9NYXJrZG93bic7XG5cbmNsYXNzIERPTSB7XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICByZW5kZXJUb0RvID0gKHRvZG8pID0+IHtcbiAgICBjb25zdCB1bCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7XG4gICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIGNvbnN0IHRvZG9FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHRvZG9GdWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgYnRuc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGZpbmlzaGVkQnV0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBzaG93RnVsbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGl0bGUuY2xhc3NMaXN0LmFkZCgndGl0bGUtZWxlbWVudCcpO1xuICAgIHRvZG9FbC5jbGFzc0xpc3QuYWRkKCd0b2RvJyk7XG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSB0b2RvLnRpdGxlO1xuICAgIHRvZG9FbC5jbGFzc0xpc3QuYWRkKGAke3RvZG8ucHJpb3JpdHl9YCk7XG4gICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gJ2RlbGV0ZSc7XG4gICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoJ2RlbGV0ZScpO1xuICAgIGZpbmlzaGVkQnV0b24uY2xhc3NMaXN0LmFkZCgnZmluaXNoJyk7XG4gICAgZmluaXNoZWRCdXRvbi50ZXh0Q29udGVudCA9ICdtYXJrJztcbiAgICBzaG93RnVsbEJ0bi5jbGFzc0xpc3QuYWRkKCdzaG93LWZ1bGwnKTtcbiAgICBzaG93RnVsbEJ0bi50ZXh0Q29udGVudCA9ICcrJztcbiAgICBidG5zQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2J0bnMtY29udGFpbmVyJyk7XG4gICAgYnRuc0NvbnRhaW5lci5hcHBlbmRDaGlsZChzaG93RnVsbEJ0bik7XG4gICAgYnRuc0NvbnRhaW5lci5hcHBlbmRDaGlsZChmaW5pc2hlZEJ1dG9uKTtcbiAgICBidG5zQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XG4gICAgdG9kb0VsLmFwcGVuZENoaWxkKHRpdGxlKTtcbiAgICB0b2RvRWwuYXBwZW5kQ2hpbGQoYnRuc0NvbnRhaW5lcik7XG4gICAgbGkuYXBwZW5kQ2hpbGQodG9kb0VsKTtcblxuICAgIHRvZG9GdWxsLmNsYXNzTGlzdC5hZGQoJ3RvZG8tZnVsbCcpO1xuICAgIHRvZG9GdWxsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIHRvZG9GdWxsLmluc2VydEFkamFjZW50SFRNTChcbiAgICAgICdhZnRlcmJlZ2luJyxcbiAgICAgIGBcbiAgICBcbiAgICA8cD5cbiAgICAgIERlc2NyaXB0aW9uOiAke3RvZG8uZGVzY3JpcHRpb259XG4gICAgPC9wPlxuICAgIDxwPkRhdGU6ICR7dG9kby5kYXRlfTwvcD5gXG4gICAgKTtcbiAgICBsaS5hcHBlbmRDaGlsZCh0b2RvRnVsbCk7XG4gICAgbGkuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgYCR7dG9kby5pZH1gKTtcbiAgICB1bC5hcHBlbmRDaGlsZChsaSk7XG4gIH07XG5cbiAgcmVuZGVyRm9ybSgpIHtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1mb3JtLWNvbnRhaW5lcicpKSByZXR1cm47XG5cbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7XG4gICAgY29uc3QgZm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGZvcm1Db250YWluZXIuY2xhc3NMaXN0LmFkZCgnbmV3LWZvcm0tY29udGFpbmVyJyk7XG5cbiAgICBjb25zdCBmb3JtRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gICAgZm9ybUVsLnNldEF0dHJpYnV0ZSgnYWN0aW9uJywgJ3N1Ym1pdCcpO1xuICAgIGZvcm1FbC5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBmb3JtTWFya2Rvd24pO1xuICAgIGZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQoZm9ybUVsKTtcbiAgICBjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgZm9ybUNvbnRhaW5lcik7XG5cbiAgICBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZS1mb3JtJylcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9ybUNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyUHJvamVjdFByZXZpZXcocHJvamVjdCkge1xuICAgIGNvbnN0IHByb2plY3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHByb2plY3RFbC5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0Jyk7XG4gICAgY29uc3QgcHJvamVjdFByZXZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBwcm9qZWN0UHJldmlldy5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LXByZXZpZXcnKTtcbiAgICBjb25zb2xlLmxvZyhwcm9qZWN0Lm5hbWUsIHByb2plY3QpO1xuICAgIHByb2plY3RQcmV2aWV3LnRleHRDb250ZW50ID0gYCR7cHJvamVjdC5uYW1lfWA7XG4gICAgcHJvamVjdEVsLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGAke3Byb2plY3QuaWR9YCk7XG5cbiAgICBwcm9qZWN0RWwuYXBwZW5kQ2hpbGQocHJvamVjdFByZXZpZXcpO1xuXG4gICAgY29uc3QgcGFyZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWNvbnRhaW5lcicpO1xuICAgIHBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQocHJvamVjdEVsKTtcbiAgfVxuXG4gIHJlbmRlclRvRG9QcmV2aWV3KHRvZG8pIHtcbiAgICBjb25zb2xlLmxvZygncmVuZGVyIHN0YXJ0Jyk7XG4gICAgY29uc3QgdG9kb1ByZXZpZXdFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRvZG9QcmV2aWV3RWwuY2xhc3NMaXN0LmFkZCgndG9kby1wcmV2aWV3Jyk7XG4gICAgdG9kb1ByZXZpZXdFbC50ZXh0Q29udGVudCA9IGAke3RvZG8udGl0bGV9YDtcbiAgICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAucHJvamVjdFtkYXRhLWlkPScke3RvZG8ucGFyZW50SWR9J11gXG4gICAgKTtcblxuICAgIHByb2plY3QuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmVlbmQnLCB0b2RvUHJldmlld0VsKTtcbiAgfVxuXG4gIHJlbmRlckFsbFRvRG8odG9kb3MpIHtcbiAgICB0aGlzLmNsZWFyVG9Eb0xpc3QoKTtcbiAgICB0b2Rvcy5mb3JFYWNoKCh0b2RvKSA9PiB0aGlzLnJlbmRlclRvRG8odG9kbykpO1xuICB9XG5cbiAgY2xlYXJUb0RvTGlzdCgpIHtcbiAgICBjb25zdCB0b0RvTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2Rvcy1saXN0IHVsJyk7XG4gICAgdG9Eb0xpc3QuaW5uZXJIVE1MID0gJyc7XG4gIH1cblxuICB0b2RvU2hvdyh0b2RvKSB7XG4gICAgY29uc29sZS5sb2codG9kbyk7XG4gICAgdG9kby5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgfVxuXG4gIHJlbmRlckFsbFByb2plY3RQcmV2aWV3KGJhc2UpIHtcbiAgICBiYXNlLnByb2plY3RzLmZvckVhY2goKHByb2plY3QpID0+IHRoaXMucmVuZGVyUHJvamVjdFByZXZpZXcocHJvamVjdCkpO1xuICB9XG5cbiAgcmVkbmVyQWxsVG9Eb1ByZXZpZXcoYmFzZSkge1xuICAgIGNvbnNvbGUubG9nKGJhc2UucHJvamVjdHMpO1xuICAgIGJhc2UucHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCkgPT5cbiAgICAgIHByb2plY3QudG9kb3MuZm9yRWFjaCgodG9kbykgPT4gdGhpcy5yZW5kZXJUb0RvUHJldmlldyh0b2RvKSlcbiAgICApO1xuICB9XG5cbiAgY2xlYXJUb0RvUHJldmlldygpIHtcbiAgICBjb25zdCB0b0RvUHJldmlld3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9kby1wcmV2aWV3Jyk7XG4gICAgdG9Eb1ByZXZpZXdzLmZvckVhY2goKHByZXZpZXcpID0+IHByZXZpZXcucmVtb3ZlKCkpO1xuICB9XG5cbiAgdG9nZ2xlRmluaXNoZWRNYXJrKHRvZG8pIHtcbiAgICB0b2RvLnF1ZXJ5U2VsZWN0b3IoJy50aXRsZS1lbGVtZW50JykuY2xhc3NMaXN0LnRvZ2dsZSgnZmluaXNoZWQnKTtcbiAgICB0b2RvLnF1ZXJ5U2VsZWN0b3IoJy50b2RvLWZ1bGwnKS5jbGFzc0xpc3QudG9nZ2xlKCdmaW5pc2hlZCcpO1xuICAgIC8vIHRvZG8ucXVlcnlTZWxlY3RvcignLmJ0bnMtY29udGFpbmVyJykuY2xhc3NMaXN0LmFkZCgnbm9wZScpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBET00oKTtcbiIsImNvbnN0IGZvcm1NYXJrZG93biA9IGA8ZGl2IGNsYXNzPVwiZmllbGRcIj5cbjxsYWJlbCBmb3I9XCJ0aXRsZVwiPlRpdGxlOiA8L2xhYmVsPlxuPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInRpdGxlXCIgaWQ9XCJ0aXRsZVwiIHJlcXVpcmVkLz5cbjwvZGl2PlxuPGRpdiBjbGFzcz1cImZpZWxkXCI+XG48bGFiZWwgZm9yPVwiZGVzY3JpcHRpb25cIj5EZXNjcmlwdGlvbjogPC9sYWJlbD5cbjxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJkZXNjcmlwdGlvblwiIGlkPVwiZGVzY3JpcHRpb25cIiByZXF1aXJlZC8+XG48L2Rpdj5cbjxkaXYgY2xhc3M9XCJmaWVsZFwiPlxuPGxhYmVsIGZvcj1cImRhdGVcIj5EYXRlOiA8L2xhYmVsPlxuPGlucHV0IHR5cGU9XCJkYXRlXCIgbmFtZT1cImRhdGVcIiBpZD1cImRhdGVcIiByZXF1aXJlZC8+XG48L2Rpdj5cbjxkaXYgY2xhc3M9XCJyYWRpby1idG5cIj5cbjxsYWJlbCBmb3I9XCJsb3ctcHJpb1wiPkxvdzwvbGFiZWw+XG48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cInByaW9yaXR5XCIgaWQ9XCJsb3ctcHJpb1wiIHZhbHVlPVwibG93XCIgLz5cbjxsYWJlbCBmb3I9XCJtZWQtcHJpb1wiPk1lZGl1bTwvbGFiZWw+XG48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cInByaW9yaXR5XCIgaWQ9XCJtZWQtcHJpb1wiIHZhbHVlPVwibWVkXCIgLz5cbjxsYWJlbCBmb3I9XCJoaWdoLXByaW9cIj5IaWdoPC9sYWJlbD5cbjxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwicHJpb3JpdHlcIiBpZD1cImhpZ2gtcHJpb1wiIHZhbHVlPVwiaGlnaFwiIGNoZWNrZWQvPlxuPC9kaXY+XG48YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj5TdWJtaXQ8L2J1dHRvbj5cbjxkaXYgY2xhc3M9XCJjbG9zZS1mb3JtXCI+PGRpdiBjbGFzcz1cInhcIj5YPC9kaXY+PC9kaXY+XG5gO1xuXG5leHBvcnQgeyBmb3JtTWFya2Rvd24gfTtcbiIsImltcG9ydCBEYXRhIGZyb20gJy4vRGF0YS5qcyc7XG5pbXBvcnQgUHJvamVjdCBmcm9tICcuL1Byb2plY3QuanMnO1xuaW1wb3J0IFRvRG8gZnJvbSAnLi9Ub0RvLmpzJztcbmltcG9ydCBET00gZnJvbSAnLi9ET00uanMnO1xuXG5jb25zb2xlLmxvZygnU1RBUlQnKTtcbmNvbnN0IGJhc2UgPSBuZXcgRGF0YSgpO1xuXG5jb25zdCBwcm9qZWN0MSA9IG5ldyBQcm9qZWN0KCdQcm9qZWN0IERlZmF1bHQnKTtcblxuY29uc3QgdG9kbzEgPSBuZXcgVG9EbygnMScsICdvZGluJywgJ3RvZGF5JywgJ2xvdycpO1xudG9kbzEucGFyZW50SWQgPSAxO1xudG9kbzEuc2V0SWQoMSk7XG5jb25zdCB0b2RvMiA9IG5ldyBUb0RvKCcyJywgJ2R2YScsICd0b2RheScsICdsb3cnKTtcbnRvZG8yLnBhcmVudElkID0gMTtcbnRvZG8yLnNldElkKDIpO1xucHJvamVjdDEuYWRkVG9Ebyh0b2RvMSk7XG5wcm9qZWN0MS5hZGRUb0RvKHRvZG8yKTtcbnByb2plY3QxLnNldElkKDEpO1xuXG5jb25zdCBwcm9qZWN0MiA9IG5ldyBQcm9qZWN0KCdQcm9qZWN0IDInKTtcbmNvbnN0IHRvZG8zID0gbmV3IFRvRG8oJzMnLCAndHJpJywgJ3RvZGF5JywgJ2hpZ2gnKTtcbnRvZG8zLnBhcmVudElkID0gMjtcbnByb2plY3QyLmFkZFRvRG8odG9kbzMpO1xucHJvamVjdDIuc2V0SWQoMik7XG5cbmJhc2UuYWRkUHJvamVjdChwcm9qZWN0MSk7XG5cbmJhc2UuYWRkUHJvamVjdChwcm9qZWN0Mik7XG5cbmJhc2UuYWN0aXZlUHJvamVjdCA9IHByb2plY3QxO1xubGV0IGFjdGl2ZVByb2plY3QgPSBiYXNlLmFjdGl2ZVByb2plY3Q7XG5jb25zb2xlLmxvZyhiYXNlKTtcbkRPTS5yZW5kZXJBbGxQcm9qZWN0UHJldmlldyhiYXNlKTtcbkRPTS5yZWRuZXJBbGxUb0RvUHJldmlldyhiYXNlKTtcbi8vIERPTS5yZW5kZXJQcm9qZWN0UHJldmlldyhwcm9qZWN0MSk7XG5ET00ucmVuZGVyQWxsVG9EbyhhY3RpdmVQcm9qZWN0LnRvZG9zKTtcbi8vIGNvbnNvbGUubG9nKGJhc2UucHJvamVjdHMuZmluZCgocHJvamVjdCkgPT4gcHJvamVjdC5uYW1lID09PSAncHJvamVjdDEnKSk7XG5cbi8vIGNvbnNvbGUuZGlyKGJhc2UpO1xuXG4vLyB0b2RvMS5pc0ZpbmlzaGVkID0gdHJ1ZTtcbi8vIGNvbnNvbGUuZGlyKGJhc2UpO1xuXG5jb25zdCBidG5OZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LXRvZG8tYnRuJyk7XG5jb25zdCBmb3JtTmV3UHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWZvcm0nKTtcbmNvbnN0IGFzaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYXNpZGUnKTtcblxuYnRuTmV3LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICBET00ucmVuZGVyRm9ybSgpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlclN1Ym1pdCk7XG59KTtcblxuY29uc3QgaGFuZGxlclN1Ym1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCB7IHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkgfSA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICBuZXcgRm9ybURhdGEodGhpcylcbiAgKTtcbiAgY29uc3QgdG9kbyA9IG5ldyBUb0RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpO1xuICB0b2RvLnNldElkKGFjdGl2ZVByb2plY3QudG9kb3MubGVuZ3RoICsgMSk7XG4gIHRvZG8uc2V0UGFyZW50SWQoYWN0aXZlUHJvamVjdC5pZCk7XG4gIGFjdGl2ZVByb2plY3QuYWRkVG9Ebyh0b2RvKTtcbiAgRE9NLnJlbmRlclRvRG8oLi4uYWN0aXZlUHJvamVjdC50b2Rvcy5zbGljZSgtMSkpO1xuICBjb25zb2xlLmxvZyhhY3RpdmVQcm9qZWN0LnRvZG9zLnNsaWNlKC0xKSk7XG4gIERPTS5yZW5kZXJUb0RvUHJldmlldyh0b2RvKTtcbn07XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgY29uc3QgYnRuQ2xvc2UgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLmRlbGV0ZScpO1xuICBpZiAoIWJ0bkNsb3NlKSByZXR1cm47XG4gIGNvbnN0IHNlbGVjdGVkVG9EbyA9IGJ0bkNsb3NlLmNsb3Nlc3QoJ2xpJyk7XG4gIGFjdGl2ZVByb2plY3QucmVtb3ZlVG9Ebygrc2VsZWN0ZWRUb0RvLmRhdGFzZXQuaWQpO1xuICBzZWxlY3RlZFRvRG8ucmVtb3ZlKCk7XG4gIERPTS5jbGVhclRvRG9QcmV2aWV3KCk7XG4gIERPTS5yZWRuZXJBbGxUb0RvUHJldmlldyhiYXNlKTtcbn0pO1xuXG5mb3JtTmV3UHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgcHJvamVjdE5hbWUgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykudmFsdWU7XG4gIGNvbnNvbGUubG9nKHByb2plY3ROYW1lKTtcbiAgY29uc29sZS5sb2coJ2NsaWNrY2xhY2snKTtcbiAgY29uc3QgbmV3UHJvamVjdCA9IG5ldyBQcm9qZWN0KHByb2plY3ROYW1lKTtcbiAgbmV3UHJvamVjdC5zZXRJZChiYXNlLnByb2plY3RzLmxlbmd0aCArIDEpO1xuICBiYXNlLmFkZFByb2plY3QobmV3UHJvamVjdCk7XG4gIHRoaXMucXVlcnlTZWxlY3RvcignaW5wdXQnKS52YWx1ZSA9ICcnO1xuXG4gIGNvbnNvbGUubG9nKGJhc2UucHJvamVjdHMpO1xuICBjb25zb2xlLmxvZyhiYXNlKTtcbiAgRE9NLnJlbmRlclByb2plY3RQcmV2aWV3KG5ld1Byb2plY3QpO1xufSk7XG5cbmFzaWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGNvbnN0IGFjdGl2ZVByb2plY3RTZWxlY3QgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLnByb2plY3QtcHJldmlldycpO1xuICBpZiAoIWFjdGl2ZVByb2plY3RTZWxlY3QpIHJldHVybjtcbiAgaWYgKGFjdGl2ZVByb2plY3RTZWxlY3QudGV4dENvbnRlbnQgPT09IGFjdGl2ZVByb2plY3QubmFtZSkgcmV0dXJuO1xuICBjb25zb2xlLmxvZygncHJvamVjdCBzZWxlY3RlZCcpO1xuICBjb25zb2xlLmxvZyhhY3RpdmVQcm9qZWN0U2VsZWN0KTtcbiAgLy8gY29uc29sZS5sb2coJ0JBU0VFRUVFRUVFJywgYmFzZS5wcm9qZWN0cyk7XG4gIGFjdGl2ZVByb2plY3QgPSBiYXNlLnByb2plY3RzLmZpbmQoXG4gICAgKHByb2plY3QpID0+IHByb2plY3QubmFtZSA9PT0gYWN0aXZlUHJvamVjdFNlbGVjdC50ZXh0Q29udGVudFxuICApO1xuICAvLyBjb25zb2xlLmxvZyhiYXNlKTtcbiAgLy8gYWN0aXZlUHJvamVjdC50b2Rvcy5wdXNoKG5ldyBUb0RvKDEsIDEsIDEsICdsb3cnKSk7XG4gIGNvbnNvbGUubG9nKGFjdGl2ZVByb2plY3QpO1xuICBET00ucmVuZGVyQWxsVG9EbyhhY3RpdmVQcm9qZWN0LnRvZG9zKTtcbiAgLy8gYWN0aXZlUHJvamVjdC50b2Rvcy5mb3JFYWNoKCh0b2RvKSA9PiBET00ucmVuZGVyVG9Ebyh0b2RvKSk7XG4gIGNvbnNvbGUubG9nKGFjdGl2ZVByb2plY3QudG9kb3MpO1xuICBjb25zb2xlLmxvZyhiYXNlKTtcbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGNvbnN0IHRvZG9TaG93QnRuID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5zaG93LWZ1bGwnKTtcbiAgaWYgKCF0b2RvU2hvd0J0bikgcmV0dXJuO1xuICBjb25zb2xlLmxvZyh0b2RvU2hvd0J0bik7XG4gIHRvZG9TaG93QnRuLnRleHRDb250ZW50ID0gdG9kb1Nob3dCdG4udGV4dENvbnRlbnQgPT09ICcrJyA/ICctJyA6ICcrJztcbiAgRE9NLnRvZG9TaG93KHRvZG9TaG93QnRuLmNsb3Nlc3QoJy50b2RvJykubmV4dFNpYmxpbmcpO1xufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgY29uc3QgYnRuTWFya0FzRmluaXNoZWQgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLmZpbmlzaCcpO1xuICBpZiAoIWJ0bk1hcmtBc0ZpbmlzaGVkKSByZXR1cm47XG4gIGNvbnN0IHRvZG8gPSBidG5NYXJrQXNGaW5pc2hlZC5jbG9zZXN0KCdsaScpO1xuICBjb25zb2xlLmxvZyh0b2RvLmRhdGFzZXQuaWQpO1xuICBjb25zb2xlLmxvZyhhY3RpdmVQcm9qZWN0LmZpbmRUb0RvQnlJRCgrdG9kby5kYXRhc2V0LmlkKSk7XG4gIGFjdGl2ZVByb2plY3QuZmluZFRvRG9CeUlEKCt0b2RvLmRhdGFzZXQuaWQpLm1hcmtBc0ZpbmlzaGVkKCk7XG4gIERPTS50b2dnbGVGaW5pc2hlZE1hcmsodG9kbyk7XG59KTtcblxuY29uc3QganNvbnNvcyA9IEpTT04uc3RyaW5naWZ5KGJhc2UpO1xuY29uc3QgdW5qc29uc29zID0gSlNPTi5wYXJzZShqc29uc29zKTtcbmNvbnNvbGUubG9nKEpTT04ucGFyc2UoanNvbnNvcykpO1xuY29uc29sZS5sb2coanNvbnNvcyk7XG51bmpzb25zb3MucHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCkgPT4gT2JqZWN0LmFzc2lnbihwcm9qZWN0LCBuZXcgUHJvamVjdCgpKSk7XG5jb25zb2xlLmxvZyh1bmpzb25zb3MpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0YSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucHJvamVjdHMgPSBbXTtcbiAgICB0aGlzLmFjdGl2ZVByb2plY3Q7XG4gICAgY29uc29sZS5sb2codGhpcy5wcm9qZWN0cyk7XG4gIH1cblxuICBhZGRQcm9qZWN0KHByb2plY3QpIHtcbiAgICB0aGlzLnByb2plY3RzLnB1c2gocHJvamVjdCk7XG4gICAgcmV0dXJuIHRoaXMucHJvamVjdHM7XG4gIH1cbiAgcmVtb3ZlUHJvamVjdChwcm9qZWN0KSB7fVxufVxuIl0sIm5hbWVzIjpbIlByb2plY3QiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJ0aGlzIiwidG9kb3MiLCJpZCIsImFkZFRvRG8iLCJ0b2RvIiwicHVzaCIsInJlbW92ZVRvRG8iLCJmaW5kSW5kZXgiLCJlbGVtZW50Iiwic3BsaWNlIiwiY29uc29sZSIsImxvZyIsInNldElkIiwiZmluZFRvRG9CeUlEIiwidG9kb0lkIiwiVG9EbyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkYXRlIiwicHJpb3JpdHkiLCJpc0ZpbmlzaGVkIiwicGFyZW50SWQiLCJtYXJrQXNGaW5pc2hlZCIsInNldFBhcmVudElkIiwicmVuZGVyVG9EbyIsInVsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibGkiLCJjcmVhdGVFbGVtZW50IiwidG9kb0VsIiwidG9kb0Z1bGwiLCJidG5zQ29udGFpbmVyIiwiZGVsZXRlQnRuIiwiZmluaXNoZWRCdXRvbiIsInNob3dGdWxsQnRuIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImluc2VydEFkamFjZW50SFRNTCIsInNldEF0dHJpYnV0ZSIsInJlbmRlckZvcm0iLCJjb250YWluZXIiLCJmb3JtQ29udGFpbmVyIiwiZm9ybUVsIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsInJlbmRlclByb2plY3RQcmV2aWV3IiwicHJvamVjdCIsInByb2plY3RFbCIsInByb2plY3RQcmV2aWV3IiwicmVuZGVyVG9Eb1ByZXZpZXciLCJ0b2RvUHJldmlld0VsIiwicmVuZGVyQWxsVG9EbyIsImNsZWFyVG9Eb0xpc3QiLCJmb3JFYWNoIiwiaW5uZXJIVE1MIiwidG9kb1Nob3ciLCJ0b2dnbGUiLCJyZW5kZXJBbGxQcm9qZWN0UHJldmlldyIsImJhc2UiLCJwcm9qZWN0cyIsInJlZG5lckFsbFRvRG9QcmV2aWV3IiwiY2xlYXJUb0RvUHJldmlldyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwcmV2aWV3IiwidG9nZ2xlRmluaXNoZWRNYXJrIiwiYWN0aXZlUHJvamVjdCIsImFkZFByb2plY3QiLCJyZW1vdmVQcm9qZWN0IiwicHJvamVjdDEiLCJ0b2RvMSIsInRvZG8yIiwicHJvamVjdDIiLCJ0b2RvMyIsImJ0bk5ldyIsImZvcm1OZXdQcm9qZWN0IiwiYXNpZGUiLCJoYW5kbGVyU3VibWl0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIk9iamVjdCIsImZyb21FbnRyaWVzIiwiRm9ybURhdGEiLCJsZW5ndGgiLCJzbGljZSIsImJ0bkNsb3NlIiwidGFyZ2V0IiwiY2xvc2VzdCIsInNlbGVjdGVkVG9EbyIsImRhdGFzZXQiLCJwcm9qZWN0TmFtZSIsInZhbHVlIiwibmV3UHJvamVjdCIsImFjdGl2ZVByb2plY3RTZWxlY3QiLCJmaW5kIiwidG9kb1Nob3dCdG4iLCJuZXh0U2libGluZyIsImJ0bk1hcmtBc0ZpbmlzaGVkIiwianNvbnNvcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1bmpzb25zb3MiLCJwYXJzZSIsImFzc2lnbiJdLCJzb3VyY2VSb290IjoiIn0=